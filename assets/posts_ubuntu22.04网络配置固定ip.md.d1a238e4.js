import{_ as s,o as a,c as n,Q as l}from"./chunks/framework.676e9b8e.js";const h=JSON.parse('{"title":"ubuntu22.04网络配置固定ip","description":"ubuntu22.04网络配置固定ip","frontmatter":{"title":"ubuntu22.04网络配置固定ip","description":"ubuntu22.04网络配置固定ip","date":"2023-12-08T00:00:00.000Z","tags":["linux","ubuntu","网络"]},"headers":[],"relativePath":"posts/ubuntu22.04网络配置固定ip.md","filePath":"posts/ubuntu22.04网络配置固定ip.md","lastUpdated":1702879232000}'),p={name:"posts/ubuntu22.04网络配置固定ip.md"},e=l(`<blockquote><p>适用于Ubuntu 17.04及更高版本</p></blockquote><h2 id="配置文件" tabindex="-1">配置文件 <a class="header-anchor" href="#配置文件" aria-label="Permalink to &quot;配置文件&quot;">​</a></h2><ol><li><p>进入 netplan 配置文件目录</p><p>通常在 /etc/netplan/ 目录下。 一般有一些不同的名字，但是都是yaml文件</p></li><li><p>在编辑前先拷贝一份，以防万一</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">cp</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">01</span><span style="color:#9ECBFF;">-network-manager-all.yaml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">01</span><span style="color:#9ECBFF;">-network-manager-all.yaml.bak</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">cp</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">01</span><span style="color:#032F62;">-network-manager-all.yaml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">01</span><span style="color:#032F62;">-network-manager-all.yaml.bak</span></span></code></pre></div></li><li><p>查看本地使用的网络模式</p><p>如果是有线连接一般就是eth0,wifi就是wlan0</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">nmcli</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">device</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">show</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">nmcli</span><span style="color:#24292E;"> </span><span style="color:#032F62;">device</span><span style="color:#24292E;"> </span><span style="color:#032F62;">show</span></span></code></pre></div><p>查看顶部的 GENERAL.DEVICE是什么，下面配置文件要用</p></li><li><p>配置netplan的yaml文件</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nano</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/netplan/01-network-manager-all.yaml</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nano</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/netplan/01-network-manager-all.yaml</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">network:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">version:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">renderer:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">NetworkManager</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># NetworkManager: 广泛用于 Linux 桌面环境的网络管理器/networkd:一般适用于ssh连接，轻量</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">ethernets:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">wlan0:</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 请将 wlan0 替换为您的 GENERAL.DEVICE 网络接口名称</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">addresses:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">192.168</span><span style="color:#9ECBFF;">.52.223/24</span><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 请替换为您的静态 IP 地址和子网掩码</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># gateway4: 192.168.52.1  gateway4 已经被废弃，建议使用默认路由（default routes）来代替。</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#B392F0;">routes:</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">to:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0.0</span><span style="color:#9ECBFF;">.0.0/0</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">via:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">192.168</span><span style="color:#9ECBFF;">.52.1</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">network:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">version:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">renderer:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">NetworkManager</span><span style="color:#24292E;">  </span><span style="color:#6A737D;"># NetworkManager: 广泛用于 Linux 桌面环境的网络管理器/networkd:一般适用于ssh连接，轻量</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">ethernets:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">wlan0:</span><span style="color:#24292E;">  </span><span style="color:#6A737D;"># 请将 wlan0 替换为您的 GENERAL.DEVICE 网络接口名称</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">addresses:</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">192.168</span><span style="color:#032F62;">.52.223/24</span><span style="color:#24292E;">  </span><span style="color:#6A737D;"># 请替换为您的静态 IP 地址和子网掩码</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;"># gateway4: 192.168.52.1  gateway4 已经被废弃，建议使用默认路由（default routes）来代替。</span></span>
<span class="line"><span style="color:#24292E;">       </span><span style="color:#6F42C1;">routes:</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">-</span><span style="color:#24292E;"> </span><span style="color:#032F62;">to:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0.0</span><span style="color:#032F62;">.0.0/0</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">via:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">192.168</span><span style="color:#032F62;">.52.1</span></span></code></pre></div></li></ol><h2 id="重启网络" tabindex="-1">重启网络 <a class="header-anchor" href="#重启网络" aria-label="Permalink to &quot;重启网络&quot;">​</a></h2><ol start="5"><li>应用配置并且重启网络<div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">netplan</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">apply</span></span>
<span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">restart</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">network-manager</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">netplan</span><span style="color:#24292E;"> </span><span style="color:#032F62;">apply</span></span>
<span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">restart</span><span style="color:#24292E;"> </span><span style="color:#032F62;">network-manager</span></span></code></pre></div></li><li>查看静态ip是否配置成功<div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 喜欢哪个运行哪个</span></span>
<span class="line"><span style="color:#B392F0;">ifconfig</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">ip</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">addr</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">show</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 喜欢哪个运行哪个</span></span>
<span class="line"><span style="color:#6F42C1;">ifconfig</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">ip</span><span style="color:#24292E;"> </span><span style="color:#032F62;">addr</span><span style="color:#24292E;"> </span><span style="color:#032F62;">show</span></span></code></pre></div></li></ol><blockquote><p>参考资料 <a href="https://cloud.tencent.com/developer/article/2323503" target="_blank" rel="noreferrer">https://cloud.tencent.com/developer/article/2323503</a><a href="https://www.cnblogs.com/zjdxr-up/p/17444844.html" target="_blank" rel="noreferrer">https://www.cnblogs.com/zjdxr-up/p/17444844.html</a><a href="https://blog.csdn.net/Neutionwei/article/details/107130995" target="_blank" rel="noreferrer">https://blog.csdn.net/Neutionwei/article/details/107130995</a><a href="https://blog.csdn.net/ly2020_/article/details/89330404" target="_blank" rel="noreferrer">https://blog.csdn.net/ly2020_/article/details/89330404</a></p></blockquote>`,6),o=[e];function t(c,r,i,y,E,d){return a(),n("div",null,o)}const u=s(p,[["render",t]]);export{h as __pageData,u as default};
